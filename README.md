# 🎓 某大学选课助手

## 系统整体抢课流程

### 1. 准备阶段
- **安装依赖**：确保环境准备就绪
- **配置课程**：设置目标课程和教师
- **设置时间**：精确配置选课开始时间
- **检查网络**：确保稳定连接

### 2. 登录认证阶段
```
启动程序 → 输入账号密码 → 获取验证码 → 图形化输入验证码 → 加密密码并提交 → 获取Token和BatchId
```

### 3. 预加载阶段
```
等待到选课前N分钟（本地时间，依赖时钟精确度，使用前最好同步电脑时钟） → 异步获取全部课程列表 → 智能匹配目标课程 → 创建双队列调度器
```

### 4. 双队列调度机制
```
主队列（正常抢课）：
├── 精确时间控制（支持提前N秒）
├── 并发请求控制（防过快）
├── 智能间隔调度
└── 实时状态监控

重试队列（失败补偿）：
├── 自动识别错误类型
├── 智能延迟重试
├── 指数退避策略
└── 最大重试限制
```

### 5. 抢课执行阶段
```
开始抢课 → 主队列按序发送请求 → 
├── 成功：记录并停止该课程任务
├── 课程已满：转入重试队列等待重试
├── 请求过快：增加延迟后重试
├── 时间未到：短暂等待后重试
└── Token过期：停止程序
```

### 6. 监控与统计
```
实时显示：
├── 主队列/重试队列任务数
├── 成功/失败统计
├── 总尝试次数
├── 运行时间
└── 各任务详细状态
```

### 7. 结束阶段
```
所有任务完成或达到限制 → 关闭会话 → 输出最终统计报告 → 程序退出
```

## 快速使用

### 1. 安装依赖
```bash
pip install requests aiohttp cryptography Pillow
```

### 2. 配置目标课程
编辑 `course.py` 文件中的 `CONFIG` 部分：
```python
"TARGET_COURSES": [
    {"course_name": "xx课", "teacher": "xx老师"},
    # 可以添加多个目标课程
],
```

### 3. 设置选课时间
```python
"SELECTION_START_TIME": "2025-12-24 23:12:00",  # 改为你的选课开始时间
```

### 4. 运行程序
```bash
python course.py
```

## 程序流程
1. 启动程序，输入学号和密码
2. 弹出验证码窗口，输入验证码
3. 自动登录并获取选课资格
4. 等待到指定时间开始自动选课
5. 实时显示选课状态

## ⚠️ 重要提示
- 确保系统时间准确（建议同步网络时间）
- 脚本启动后不要登录选课系统，会挤占下线
- 日志提示不太精确（不影响功能）
- 保持网络连接稳定
- 请查看好配置信息
- 程序仅作学习参考，使用风险自负

## 📄 免责声明

**请在使用前仔细阅读：**

1. **合法性声明**  
   本程序仅用于**学习和研究目的**，不鼓励也不支持任何违反学校规定或网络使用政策的自动化操作。用户应自行了解并遵守所在学校关于选课系统的使用规定。如有侵权，请联系我删除此仓库。

2. **使用风险**  
   - 使用本程序若导致账号被限制、选课权限被暂停或其他纪律处分与本人无关
   - 程序可能存在bug，导致选课失败或错误操作
   - 选课系统不再更新，程序可能失效，不接受issue以及pr
   - **作者不承担任何因使用本程序造成的直接或间接损失**

3. **责任限制**  
   用户自行承担使用本程序的一切风险。作者不对以下情况负责：
   - 选课失败或错过选课时间
   - 账号被封禁或受到学校处分
   - 程序bug导致的任何问题
   - 系统更新导致程序失效

4. **学术诚信**  
   请遵守学术诚信原则，合理使用技术工具。自动化抢课可能违反公平原则，影响其他同学正常选课。

5. **建议**  
   - 优先使用官方选课渠道
   - 仅在理解风险后使用本程序
   - 保留手动操作作为备用方案

**继续使用即表示您已阅读、理解并同意承担上述所有风险。**
